<!--Start of Tawk.to Script-->
<script type="text/javascript">
    var Tawk_API = Tawk_API || {},
        Tawk_LoadStart = new Date();
    (function () {
        var s1 = document.createElement("script"),
            s0 = document.getElementsByTagName("script")[0];
        s1.async = true;
        s1.src = "https://embed.tawk.to/6735361c4304e3196ae254a0/1icjtmo3b";
        s1.charset = "UTF-8";
        s1.setAttribute("crossorigin", "*");
        s0.parentNode.insertBefore(s1, s0);
    })();

    Tawk_API.onLoad = function () {
        // Override the function responsible for changing the document title
        Tawk_API.setVisitorNotificationTitle = function () {};
    };
</script>

<!--End of Tawk.to Script-->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get("token");
        const logout = urlParams.get("logout");

        if (token) {
            if (typeof localStorage !== "undefined") {
                localStorage.setItem("token", token);
            }

            // Optionally remove the token from the URL
            // const currentPath = window.location.pathname;
            // window.history.replaceState({}, document.title, currentPath);
        } else if (logout) {
            if (typeof localStorage !== "undefined") {
                localStorage.removeItem("token");
            }

            // Remove the userInfo cookie using plain JavaScript
            deleteCookie("userInfo");
        }
    });

    // Function to delete a cookie
    function deleteCookie(name: string) {
        document.cookie =
            name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
    }
</script>

<!-- register sw -->
<script is:inline>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker.register("/sw.js");
        });
    }
</script>
